:root {
  --accent: #b266ff;
  --accent-dark: #7a33ff;
  --glow: rgba(155,77,255,.4);
  --btn-border: rgb(255,142,66);
  --btn-glow: rgba(255,142,66,.6);
  --enemy-orange: rgb(255,142,66);
  --bg: rgb(26,26,26);
  --box-bg: rgb(32,32,32);
}

.trap-active {
  --accent: rgb(255,142,66);
  --accent-dark: rgb(255,142,66);
  --glow: rgba(255,142,66,.5);
  --btn-border: rgb(136,163,232);
  --btn-glow: rgba(136,163,232,.6);
}

@media (min-width: 901px) {
  .scaler-container {
    zoom: 0.9;
  }
  .layout {
    grid-template-columns: 3fr 1fr !important;
    max-width: 1800px !important;
  }
  .watermark {
    position: fixed;
    bottom: 30px;
    right: 40px;
    font-size: 24px;
    opacity: 0.6;
    text-align: right;
  }
}

body {
  margin: 0;
  min-height: 100vh;
  background: var(--bg);
  color: white;
  font-family: 'Segoe UI', Arial, sans-serif;
  padding-bottom: 120px;
}

.mode-toggle {
  position: fixed;
  top: 15px;
  right: 15px;
  width: 60px;
  height: 60px;
  background: var(--box-bg);
  border: 3px solid var(--btn-border);
  border-radius: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 15px var(--btn-glow);
  z-index: 1001;
}

.mode-toggle img { width: 40px; height: 40px; }

h1 {
  text-align: center;
  margin: 10px 0 30px 0;
  font-size: clamp(32px, 5vw, 64px);
  color: var(--accent);
  text-shadow: 0 0 15px var(--accent);
}

.layout {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
  padding: 0 20px;
  max-width: 1600px;
  margin: 0 auto;
}

.box {
  background: var(--box-bg);
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 0 25px var(--glow);
  border: 1px solid rgba(255,255,255,.05);
}

.box-title {
  font-size: clamp(20px, 4vw, 26px);
  margin-bottom: 20px;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: bold;
}

.upgrades-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 12px;
}

.upgrades-grid label {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  background: rgba(255,255,255,.03);
  padding: 10px;
  border-radius: 12px;
  cursor: pointer;
  min-height: 65px;
}

.custom-icon { width: 45px; height: 45px; flex-shrink: 0; object-fit: contain; }

.enemy-count {
  width: 60px;
  height: 45px;
  background: #000;
  border: 2px solid var(--enemy-orange);
  color: white;
  border-radius: 10px;
  font-size: 20px;
  text-align: center;
  flex-shrink: 0;
}

.watermark {
  color: rgba(255,255,255,0.4);
  font-weight: bold;
  letter-spacing: 2px;
  text-shadow: 0 0 10px var(--accent);
  pointer-events: none;
  font-style: italic;
}

@media(max-width:900px) {
  body { padding-bottom: 220px; }
  .layout { display: flex !important; flex-direction: column; }
  .controls { order: -1; }
  .upgrades-grid { grid-template-columns: 1fr; }
  #results-container {
    position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000;
    border-radius: 20px 20px 0 0; padding: 15px 25px;
    background: var(--box-bg);
  }
}

input[type="checkbox"] { width: 25px; height: 25px; accent-color: var(--accent); }
input[type="number"], select { padding: 5px 10px; background: #111; color: white; border: 2px solid var(--accent-dark); border-radius: 12px; }

.price { font-size: 52px; color: var(--accent); font-weight: bold; text-align: center; }
.formula { font-size: 16px; color: #888; text-align: center; margin-top: 5px; }

.trap-results-list { list-style: none; padding: 0; margin: 0; font-size: 24px; }
.trap-results-list li { padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,.1); display: flex; justify-content: space-between; color: var(--enemy-orange); }

.clear-btn { width: 100%; background: rgba(255,77,77,.15); border: 2px solid #ff4d4d; color: #ff4d4d; padding: 15px; font-size: 22px; margin-top: 25px; border-radius: 12px; cursor: pointer; }